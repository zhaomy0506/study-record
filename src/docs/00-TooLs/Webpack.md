# WebpackğŸ“¦

Webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚å®ƒå¯ä»¥å°†å¤šä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleï¼Œä»¥ä¼˜åŒ–åŠ è½½æ€§èƒ½

## æ ¸å¿ƒæ¦‚å¿µ

1. **å…¥å£ï¼ˆEntryï¼‰**ğŸ‘‹

   å…¥å£æ–‡ä»¶æ˜¯ä½ çš„åº”ç”¨ç¨‹åºå¼€å§‹çš„åœ°æ–¹ã€‚Webpack ä¼šä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹ï¼Œé€æ­¥æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ–‡ä»¶ï¼Œç„¶åå°†å®ƒä»¬æ‰“åŒ…åœ¨ä¸€èµ·ã€‚

2. **è¾“å‡ºï¼ˆOutputï¼‰**ğŸ“¤

   å‘Šè¯‰Webpackæ‰“åŒ…å®Œæˆåç”Ÿæˆçš„æ–‡ä»¶åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Œä»¥åŠå®ƒä»¬çš„æ–‡ä»¶åã€‚

3. **åŠ è½½å™¨ï¼ˆLoadersï¼‰**âš™ï¸

   åŠ è½½å™¨ä½¿å¾—Webpackèƒ½å¤Ÿç†è§£å’Œå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼Œå¦‚è½¬æ¢Sassåˆ°CSSã€å°†ES6ä»£

4. **æ’ä»¶ï¼ˆPluginsï¼‰**ğŸ”Œ

   æ’ä»¶å¯ä»¥æ‰§è¡Œå„ç§è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œä¾‹å¦‚ç”ŸæˆHTMLæ–‡ä»¶ã€æ¸…ç†æ—§æ–‡ä»¶ã€æå–CSSç­‰

5. **æ¨¡å¼ï¼ˆModeï¼‰**ğŸ”„

   é€šè¿‡æŒ‡å®š `development`ã€`production` æˆ– `none` æ¥è®¾ç½®æ„å»ºæ¨¡å¼

   æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œé€‰æ‹©ä¸åŒçš„æ¨¡å¼å¯ä»¥å½±å“Webpackçš„æ„å»ºè¡Œä¸ºã€‚å¼€å‘æ¨¡å¼å¸®åŠ©ä½ æ›´æ–¹ä¾¿åœ°è¿›è¡Œè°ƒè¯•ï¼Œç”Ÿäº§æ¨¡å¼åˆ™ä¼šä¼˜åŒ–è¾“å‡ºæ–‡ä»¶ä»¥å‡å°æ–‡ä»¶å¤§å°ã€‚

## å¸¸è§é…ç½®å±æ€§

| å±æ€§å   | æè¿°                       |
| -------- | -------------------------- |
| entry    | æŒ‡å®šå…¥å£æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶æ•°ç»„ |
| output   | å®šä¹‰è¾“å‡ºæ–‡ä»¶é…ç½®           |
| module   | é…ç½®æ¨¡å—å¤„ç†è§„åˆ™           |
| plugins  | é…ç½®æ’ä»¶                   |
| resolve  | é…ç½®æ¨¡å—è·¯å¾„è§£æ           |
| devServe | é…ç½®å¼€å‘æœåŠ¡å™¨             |

## åŸºæœ¬ä½¿ç”¨

1. å®‰è£…Webpack

```bash
# åˆè¯†åŒ–æ–‡ä»¶å¤¹
npm init -y
# ä½¿ç”¨npmæˆ–yarmå®‰è£…Webpackå’Œå…¶å‘½ä»¤è¡Œå·¥å…·
npm i webpack webpack-cli --save-dev
```

2. åˆ›å»º `webpack.config.js`	

   åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `webpack.config.js` æ–‡ä»¶ï¼Œé…ç½®æ‰“åŒ…é€‰é¡¹ï¼š

```js
const path = require('path')//å¼•å…¥nodeä¸­pathæ¨¡å—,ç”¨äºå¤„ç†æ–‡ä»¶

module.exports = {
	//å…¥å£æ–‡ä»¶ - æ‰“åŒ…ä»€ä¹ˆ?
    entry:'./src/main.js',
    //å‡ºå£æ–‡ä»¶
    output:{
        path:path.join(__dirname,'dist'),//æ·»åŠ æ–‡ä»¶å¤¹
        filename:'[name].js' //æ‰“åŒ…åçš„æ–‡ä»¶å
    },
}
```

3. é…ç½®`package.json`

   åœ¨ `package.json` æ–‡ä»¶ä¸­é…ç½®æ„å»ºå‘½ä»¤

```json
"script":{
    "build":"webpack --config webpack.config.js"
}
```

## è¯¦è§£

### entry

è¯¥å±æ€§ç”¨äºæŒ‡å®šæ‰“åŒ…åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶,æ˜¯webpackæ‰“åŒ…åº”ç”¨ç¨‹åºçš„èµ·ç‚¹

å¯ä»¥æœ‰ä¸‰ç§å†™æ³•ï¼š

ä½¿ç”¨å­—ç¬¦ä¸²è·¯å¾„æŒ‡å®šå•ä¸ªå…¥å£æ–‡ä»¶ï¼š

```js
module.exports = {
    entry: './src/index.js'
}
```

ä½¿ç”¨æ•°ç»„æŒ‡å®šå¤šä¸ªå…¥å£æ–‡ä»¶ï¼š

```js
module.exports = {
    entry: ['./src/index.js','./src/a.js']
}
```

ä½¿ç”¨å¯¹è±¡æŒ‡å®šå¤šä¸ªå…¥å£æ–‡ä»¶å¹¶ä¸ºå®ƒä»¬å‘½å

```js
module.exports = {
    entry: {
        main:'./src/index.js',
        a: './src/a.js',
    }
}
```

### æ’ä»¶

ä½¿ç”¨ `html-webpack-plugin` æ’ä»¶è‡ªåŠ¨å¼•å…¥æ–‡ä»¶åˆ° index.htmlä»¶

```bash
npm i html-webpack-plugin -D #-D == --save-dev
```

åœ¨é…ç½®ä¸­ä½¿ç”¨ï¼š

```js
const HTMLWebPackPlugin = require('html-webpack-plugin')
module.exports = {
	plugins : [
        //æ’ä»¶å®ä¾‹
        new HTMLWebPackPlugin({
            template:"./public/index.html"//æŒ‡å®šå¼•å…¥çš„æ–‡ä»¶
        })
    ]
}
```

æ¸…ç†è¾“å‡ºç›®å½•æ— ç”¨æ–‡ä»¶ï¼Œä½¿ç”¨ `clean-webpack-plugin` æ’ä»¶ï¼š

```bash
npm i clean-webpack-plugin -D
#è¿™ä¸ªæ’ä»¶ç”¨äºæ¯æ¬¡æ„å»ºå‰æ¸…ç†è¾“å‡ºç›®å½•ï¼Œä»¥ç¡®ä¿æ—§æ–‡ä»¶ä¸ä¼šå¹²æ‰°æ–°çš„æ„å»ºã€‚
```

### resolve

å¤„ç†è·¯å¾„ç¼©å†™ï¼Œä½¿ç”¨åˆ«åæ¥ç®€åŒ–è·¯å¾„ï¼š

```js
resolve: {
//å¿½ç•¥jsåç¼€,vueåç¼€
	extensions: [".js", ".vue"],
    //åˆ«å
    alias: {
      "@": path.join(__dirname, "src"),
    },
  },
};

```

### devserver

é…ç½®å¼€å‘æœåŠ¡å™¨ï¼š

å®‰è£… `webpack-dev-server` æ’ä»¶ï¼š

```bash
npm i webpack-dev-server -D
```

åœ¨é…ç½®ä¸­ä½¿ç”¨ï¼š

```js
devServer: {
    //port æ˜¯æŒ‡å®šå¼€å‘æœåŠ¡å™¨çš„ç«¯å£å·
    port: 8080,
    //open æ˜¯å†³å®šæ˜¯å¦è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€é¡¹ç›®ã€‚
    open: true
}
```

## ç¯å¢ƒåˆ¤æ–­

development å¼€å‘ç¯å¢ƒ

production ç”Ÿäº§ç¯å¢ƒ

`process.env.NODE_ENV` æ˜¯ä¸€ä¸ªNode.jsä¸­çš„ç¯å¢ƒå˜é‡ï¼Œç”¨äºæŒ‡ç¤ºå½“å‰ä»£ç æ‰€è¿è¡Œçš„ç¯å¢ƒç±»å‹ã€‚


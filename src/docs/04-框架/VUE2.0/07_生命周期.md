# 生命周期

Vue 生命周期是在特定时刻由 Vue 框架调用的一系列函数，也称为生命周期回调函数、生命周期函数或生命周期钩子。这些钩子函数具有特定的命名，无法更改，但它们的具体内容由程序员根据需要编写。

在生命周期函数中,this指向是`vm`或 `VueComponent组件实例对象`

## 四个阶段和八个钩子

<img src="../../.image/生命周期.png" style="zoom: 80%;" />

1. **创建阶段：**
   - `beforeCreate`：在数据代理和数据检测之前被调用
   - `created`：在实例创建之后被调用
2. **挂载阶段：**
   - `beforeMount`：在 Vue 模板解析和创建虚拟 DOM 之前被调用
   - `mounted`：在初识的真实 DOM 放入页面后被调用（挂载完毕）
3. **更新阶段：**
   - `beforeUpdate`：在数据更新之前被调用，此时数据已更新，但视图未更新
   - `updated`：在数据更新之后被调用
4. **销毁阶段：**
   - `beforeDestroy`：在实例销毁之前被调用
   - `destroyed`：在实例销毁之后被调用

## 常用的生命周期钩子

1. `mounted`：用于发送 AJAX 请求、启动定时器、绑定自定义事件、订阅消息等（初始化操作）
2. `beforeDestroy`：用于清除定时器、解绑自定义事件、取消订阅消息等（收尾工作）

## 关于销毁 Vue 实例

1. 销毁后使用 Vue 开发者工具将看不到任何消息
2. 销毁后自定义事件会失效，***但原生 DOM 事件依然有效***
3. 通常不应在 `beforeDestroy` 中操作数据，因为即便操作，也不会触发视图更新流程。

> 其中有三个生命周期钩子为在图中展示出来,比较特殊

## 特殊的生命周期钩子

`$nextTick()`：在 DOM 更新完成之后执行一个回调函数

常见用例包括：

- 当修改数据后，想要获取更新后的 DOM 元素的准确状态
- 当你在循环中更新数据时，希望在更新全部完成后执行某些操作(获取焦点)

## Vue Router 的独有钩子

 在 Vue Router 中，除了通用的生命周期钩子，还有两个特殊的钩子：

   1. `activated`：这个钩子会在组件被激活时调用。

      适用于处理页面切换到当前组件时的一些特定逻辑，比如获取数据或执行初始化操作

   2. `deactivated`：这个钩子会在组件失活时调用

      适用于处理页面切换到其他组件时的清理操作，比如取消订阅或清除定时器